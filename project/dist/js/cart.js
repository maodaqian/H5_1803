"use strict";$(function(){$.cookie.json=!0;var a=$.cookie("products")||[];if(0!==a.length){$(".cart_not_empty").removeClass("hide");var t=template("cart_temp",{products:a});$(".cart_not_empty table tbody").html(t),$(".cart_not_empty table tbody").on("click",".del_link",function(){var t=r($(this).parents("tr").data("id"),a);a.splice(t,1),$.cookie("products",a,{expires:7,path:"/"}),$(this).parents("tr").remove(),0===a.length&&$(".cart_empty").removeClass("hide").next().addClass("hide"),i()}),$(".cart_not_empty table tbody").on("click",".minus, .add",function(){var t=r($(this).parents("tr").data("id"),a),e=a[t];if($(this).is(".minus")){if(e.amount<=1)return;e.amount--}else e.amount++;$.cookie("products",a,{expires:7,path:"/"}),$(this).siblings(".amount").val(e.amount),$(this).parents("tr").children(".sub_total").text((e.price*e.amount).toFixed(2)),i()}),$(".cart_not_empty table tbody").on("blur",".amount",function(){var t=r($(this).parents("tr").data("id"),a),e=a[t],o=$(this).val();/^[1-9]\d*$/.test(o)?(e.amount=o,$.cookie("products",a,{expires:7,path:"/"}),$(this).parents("tr").children(".sub_total").text((e.price*e.amount).toFixed(2)),i()):$(this).val(e.amount)}),$(".ck_all").click(function(){var t=$(this).prop("checked");$(".ck_prod").prop("checked",t),i()}),$(".ck_prod").click(function(){var t=$(".ck_prod:checked").length;$(".ck_all").prop("checked",t===a.length),i()})}else $(".cart_empty").removeClass("hide");function r(t,e){for(var o=0,a=e.length;o<a;o++)if(e[o].id==t)return o;return-1}function i(){var o=0;$(".ck_prod:checked").each(function(t,e){o+=Number($(e).parents("tr").find(".sub_total").text())}),$(".total").text(o.toFixed(2))}});